<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Fundamentals Evaluation - Manipulaci√≥n DOM</title>
    <link rel="stylesheet" href="/styles/index.css" />
  </head>
  <body>
    <header class="header">
      <div class="container header__container">
        <a href="/index.html">
          <img
            src="assets/images/codeable-logo-sm.svg"
            alt="codeable-logo"
            width="135"
            height="32"
            class="header__logo"
          />
        </a>
        <nav class="navigation">
          <ul>
            <li class="active"><a href="/diagramas.html">Diagramas VV</a></li>
            <li><a href="/funciones.html">Funciones</a></li>
            <li><a href="/dom.html">Manipulaci√≥n del DOM</a></li>
          </ul>
        </nav>
        <p class="header__name">Ang√©lica Arias</p>
      </div>
    </header>
    <main>
      <div class="section-xl">
        <article class="container__blog">
          <h1 class="title__blog">Manipulaci√≥n del DOM</h1>
          <h2 class="subtitle__blog">Instrucciones</h2>
          <p class="text__blog">
            Sigue las instrucciones y crea componentes web utilizando
            JavaScript, manipulando el DOM, escuchando eventos e implementando
            persistencia con localStorage.
          </p>
          <h2 class="subtitle__blog">Crea un 'Tooltip'</h2>
          <p class="text__blog">
            Un Tooltip es un peque√±o cuadro de informaci√≥n que aparece cuando
            pasas el cursor sobre un elemento en una interfaz gr√°fica de
            usuario. Este cuadro ofrece detalles adicionales sobre la funci√≥n
            del elemento, proporcionando as√≠ una ayuda contextual. Por ejemplo,
            si pasas el cursor sobre un bot√≥n que guarda cambios en una
            aplicaci√≥n, un Tooltip podr√≠a aparecer con el texto "Guardar", para
            clarificar qu√© hace ese bot√≥n. Los Tooltips son √∫tiles para mejorar
            la experiencia del usuario, ya que proporcionan orientaci√≥n sin
            requerir que se desplace a otra secci√≥n para obtener m√°s
            informaci√≥n.
          </p>
          <h3 class="subtitle2">Requerimiento</h3>
          <p class="text__blog">
            Tu tarea es crear un Tooltip, un peque√±o elemento emergente que
            proporciona informaci√≥n adicional cuando el usuario pasa el cursor
            sobre un elemento. Utilizar√°s JavaScript para manipular el DOM y
            crear este componente.
          </p>
          <ul class="list">
            <li>
              <strong>Elemento Objetivo</strong>:El elemento sobre el cual
              aparecer√° el Tooltip ser√° cualquier elemento que tenga un atributo
              `data-tooltip` definido.
            </li>
            <li>
              <strong>Contenido del Tooltip</strong>:El valor del atributo ser√°
              el mensaje que aparecer√° en el Tooltip. Por ejemplo, un elemento
              con el atributo `data-tooltip="Grabar"` mostrar√° el texto "Grabar"
              como contenido del Tooltip.
            </li>
            <li>
              <strong>Posicionamiento</strong>:El Tooltip debe aparecer encima
              del elemento objetivo.
            </li>
            <li>
              <strong>Estilo</strong>: Sigue el dise√±o especificado en Figma
              para dar estilo al Tooltip
            </li>
            <li>
              <strong>Interacci√≥n</strong>: El Tooltip debe mostrarse cuando el
              usuario pase el cursor sobre el elemento objetivo y desaparecer
              cuando el cursor se mueva fuera del elemento. Pero no lo debe
              hacer inmediato. El mouse debe mantenerse por encima del elemento
              objetivo durante 300ms para luego mostrar el Tooltip. Si el cursor
              sale del elemento objetivo antes de cumplirse los 300ms, el
              Tooltip no debe mostrarse.
            </li>
          </ul>
          <h3 class="subtitle2">Demo</h3>
          <p class="text__blog">
            A continuaci√≥n, presenta una demostraci√≥n del Tooltip.
          </p>
          <pre><code>
            const tooltip = document.querySelector(".boton");
            const mensaje = document.querySelector(".tooltip__content");
            
            const se√±alarTooltip = () => {
              let timer = setTimeout(() => {
                mensaje.style.display = "block";
              }, 300);
              tooltip.addEventListener("mouseleave", () => {
                clearTimeout(timer);
              });
            };
            const dejarTooltip = () => {
              mensaje.style.display = "none";
            };
            
            tooltip.addEventListener("mouseenter", se√±alarTooltip);
            tooltip.addEventListener("mouseleave", dejarTooltip);
         </code></pre>
          <div class="tooltip__button">
            <div class="tooltip__content">
              <p class="tooltip">"funciona! üòÑ"</p>
            </div>
            <div>
              <button class="boton" data-tooltip="funciona! üòÑ">Tooltip</button>
            </div>
          </div>
          <h2 class="subtitle__blog">
            Crea un Formulario con Validaci√≥n en tiempo real
          </h2>
          <p class="text__blog">
            El objetivo de este ejercicio es crear un formulario HTML que
            realice validaciones en tiempo real utilizando JavaScript, persista
            el progreso usando localStorage y procese el env√≠o usando JavaScript
            para mostrar un mensaje con la respuesta del servidor.
          </p>
          <h3 class="subtitle2">Requerimientos</h3>
          <h4 class="subtitle3">Campos del formulario:</h4>
          <ul class="list">
            <li><strong>Nombre</strong>: Un input obligatorio</li>
            <li>
              <strong>Apodo</strong>: Un input obligatorio de entre 3 y 10
              caracteres. Solo debe aceptar caracteres alfanum√©ricos. Estos son
              letras (a-z) o (A-Z), d√≠gitos (0-9).
            </li>
            <li>
              <strong>Biograf√≠a</strong>: Textarea opcional, pero si se llena,
              deber√° tener m√≠nimo 100 caracteres.
            </li>
            <li>
              <strong>Contrase√±a</strong>: Un input obligatorio de m√≠nimo 8
              caracteres, al menos una letra may√∫scula y un n√∫mero.
            </li>
          </ul>
          <h4 class="subtitle3">Validaci√≥n en tiempo real</h4>
          <ul class="list">
            <li>
              Valida el contenido de cada campo inmediatamente cuando el usuario
              comienza a escribir en √©l.
            </li>
            <li>
              Muestra un mensaje de error debajo del campo cuando no pasa la
              validaci√≥n.
            </li>
            <li>
              El mensaje de error debe desaparecer cuando el campo sea v√°lido.
            </li>
          </ul>
          <h4 class="subtitle3">Persistencia</h4>
          <ul class="list">
            <li>
              Guarda el progreso del usuario en el `localStorage` cada vez que
              se valide un campo (no queremos guardar datos inv√°lidos)
            </li>
            <li>
              Al recargar la p√°gina, el formulario debe recuperar el estado
              guardado del `localStorage`.
            </li>
            <li>
              El campo Contrase√±a contiene datos sensibles por lo tanto no debe
              almacenarse en `localStorage`
            </li>
          </ul>
          <h4 class="subtitle3">Env√≠o del formulario</h4>
          <ul class="list">
            <li>
              El bot√≥n para enviar el formulario debe estar deshabilitado hasta
              que todos los campos sean v√°lidos.
            </li>
            <li>
              Al hacer clic en enviar, simula una petici√≥n al servidor
              utilizando JavaScript. El m√©todo debe ser POST, la URL ser√° el
              servicio echo '‚Äãhttps://mocktarget.apigee.net/echo'. Deber√° tener
              el header Content-Type adecuado.
            </li>
            <li>
              Luego de procesar la respuesta, a√±ade un elemento debajo del
              formulario que muestre la respuesta del servidor en formato JSON.
            </li>
          </ul>
          <h3 class="subtitle2">Demo</h3>
          <p class="text__blog">
            A continuaci√≥n, presenta una demostraci√≥n del Formulario con
            validaci√≥n.
          </p>
          <pre><code>
        <!-- c√≥digo del formulario aqu√≠ -->
        const form = document.forms.register;

        const inputs = document.querySelectorAll("#formulario input");
        const textarea = document.querySelector("#formulario textarea");
        const error1 = document.querySelector(".mensaje__error.error-nombre");
        const error2 = document.querySelector(".mensaje__error.error-apodo");
        const error3 = document.querySelector(".mensaje__error.error-biografia");
        const error4 = document.querySelector(".mensaje__error.error-contrase√±a");
        const boton = document.querySelector(".button__form");
        const regex = {
          nombre: /^[a-zA-Z√°√©√≠√≥√∫√º√Å√â√ç√ì√ö√ú√±√ë\s]{3,}$/,
          apodo: /^[a-zA-Z0-9]{3,10}$/,
          biografia: /^[a-zA-Z0-9\s]{100,}$/,
          contrase√±a: /^(?=.*[A-Z])(?=.*\d).{8,}$/,
        };
        
        const validarInputs = (event) => {
          switch (event.target.name) {
            case "nombre":
              if (regex.nombre.test(event.target.value)) {
                error1.style.display = "none";
              } else {
                error1.style.display = "block";
              }
              break;
            case "apodo":
              if (regex.apodo.test(event.target.value)) {
                error2.style.display = "none";
              } else {
                error2.style.display = "block";
              }
              break;
            case "biografia":
              if (regex.biografia.test(event.target.value)) {
                error3.style.display = "none";
              } else {
                error3.style.display = "block";
              }
              break;
            case "contrase√±a":
              if (regex.contrase√±a.test(event.target.value)) {
                error4.style.display = "none";
              } else {
                error4.style.display = "block";
              }
              break;
          }
          actualizarEstadoBoton();
        };
        
        const validarFormulario = () => {
          // Verificar si todos los campos del formulario son v√°lidos
          const nombreValido = regex.nombre.test(form.elements.nombre.value);
          const apodoValido = regex.apodo.test(form.elements.apodo.value);
          const contrase√±aValida = regex.contrase√±a.test(
            form.elements.contrase√±a.value
          );
        
          // Devolver true si todos los campos son v√°lidos, de lo contrario, false
          return nombreValido && apodoValido && contrase√±aValida;
        };
        
        const actualizarEstadoBoton = () => {
          boton.disabled = !validarFormulario();
        };
        
        textarea.addEventListener("input", validarInputs);
        inputs.forEach((input) => {
          input.addEventListener("input", validarInputs);
          input.addEventListener("input", validarFormulario);
        });
        
        form.onsubmit = function (event) {
          event.preventDefault();
        
          const nombre = form.elements.nombre.value;
          const apodo = form.elements.apodo.value;
          const biografia = form.elements.biografia.value;
          const contrase√±a = form.elements.contrase√±a.value;
          // URL de destino
          const url = "https://mocktarget.apigee.net/echo";
          // Crear el objeto de datos a enviar
          const datos = {
            nombre: nombre,
            apodo: apodo,
            biografia: biografia,
            contrase√±a: contrase√±a,
          };
        
          // Opciones para fetch
          const options = {
            method: "POST",
            body: JSON.stringify(datos),
            headers: {
              "Content-Type": "application/json",
            },
          };
        
          // Realizar petici√≥n
          fetch(url, options)
            .then((response) => response.json())
            .then((data) => {
              console.log("Respuesta del servidor:", data);
            })
            .catch((error) => {
              console.error("Error al enviar la solicitud:", error);
            });
        };
        
        //local storage--------------------------
        function saveForm(form) {
          const formData = new FormData(form);
          const formDataObject = {};
        
          for (const [key, value] of formData.entries()) {
            if (key !== "contrase√±a") {
              formDataObject[key] = value;
            }
          }
        
          localStorage.setItem("formData", JSON.stringify(formDataObject));
        }
        
        form.addEventListener("change", (_event) => saveForm(form));
        

       </code></pre>
          <div class="form__demo">
            <div class="form__frame">
              <form
                class="form"
                name="register"
                id="formulario"
                method="post"
                action="https://mocktarget.apigee.net/echo"
              >
                <label class="label" for="nombre">Nombre</label>
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  placeholder="Ram√≥n Suarez"
                  required
                />
                <p class="mensaje__error error-nombre">campo obligatorio</p>

                <label class="label" for="apodo">Apodo</label>
                <input
                  type="text"
                  id="apodo"
                  name="apodo"
                  placeholder="ramonsupersuarez"
                  required
                />
                <p class="mensaje__error error-apodo">
                  debe contener entre 3 y 10 caracteres; se aceptan letras
                  min√∫sculas, may√∫sculas y digitos del 0 al 9
                </p>

                <label class="label" for="biografia">Biograf√≠a</label>
                <textarea id="biografia" name="biografia"> </textarea>
                <p class="mensaje__error error-biografia">
                  opcional, debe contener minimo 100 caracteres
                </p>
                <label class="label">Contrase√±a</label>
                <input
                  type="password"
                  id="contrase√±a"
                  name="contrase√±a"
                  required
                />
                <p class="mensaje__error error-contrase√±a">
                  debe contener m√≠nimo 8 caracteres, al menos una letra
                  may√∫scula y un n√∫mero.
                </p>

                <button class="button__form" type="submit" disabled>
                  Enviar
                </button>
              </form>
            </div>
          </div>
          <div class="frame__19">
            <pre class="codes"><code>
Respuesta del servidor: 

            </code></pre>
          </div>
        </article>
      </div>
    </main>
    <script src="/formulario.js"></script>
    <script src="/tooltip.js"></script>
  </body>
</html>
